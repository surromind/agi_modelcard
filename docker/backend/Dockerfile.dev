FROM python:3.9

WORKDIR /src

# 개발 도구 및 의존성만 미리 설치
RUN pip install pipenv

# Pipfile과 Pipfile.lock만 복사하여 의존성 설치
COPY modelcard-backend/Pipfile modelcard-backend/Pipfile.lock ./

# 의존성 설치 (소스코드 변경과 무관)
RUN pipenv install --dev --system

# 개발 서버 실행 (소스코드는 볼륨 마운트로 처리)
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80", "--reload"]
